<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPL StatHub - Real Player Analytics</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="header-title">FPL StatHub</h1>
                <p class="header-subtitle">Real Fantasy Premier League Analytics</p>
                <div class="header-meta">
                    <span class="data-status" id="dataStatus">
                        <span class="status-dot"></span>
                        <span id="lastUpdated">Loading...</span>
                    </span>
                    <button class="btn btn--secondary btn--sm" id="refreshBtn">
                        <span id="refreshIcon">â†»</span> Refresh Data
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-position="goalkeepers">Goalkeepers</button>
            <button class="nav-tab" data-position="defenders">Defenders</button>
            <button class="nav-tab" data-position="midfielders">Midfielders</button>
            <button class="nav-tab" data-position="attackers">Attackers</button>
            <button class="nav-tab" data-position="analytics">Analytics</button>
        </nav>

        <!-- Filters Panel -->
        <div class="filters-panel">
            <div class="filters-grid">
                <div class="filter-group">
                    <label class="form-label">Min Minutes</label>
                    <input type="range" id="minutesFilter" min="0" max="3000" value="500" class="range-input">
                    <span class="range-value" id="minutesValue">500</span>
                </div>
                <div class="filter-group">
                    <label class="form-label">Form Rating</label>
                    <input type="range" id="formFilter" min="0" max="10" value="0" step="0.1" class="range-input">
                    <span class="range-value" id="formValue">0.0+</span>
                </div>
                <div class="filter-group">
                    <label class="form-label">xPoints Range</label>
                    <input type="range" id="xPointsFilter" min="0" max="15" value="0" step="0.1" class="range-input">
                    <span class="range-value" id="xPointsValue">0.0+</span>
                </div>
                <div class="filter-group">
                    <label class="form-label">Performance</label>
                    <select id="performanceFilter" class="form-control">
                        <option value="all">All Games</option>
                        <option value="home">Home Only</option>
                        <option value="away">Away Only</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Player Stats Tables -->
        <div class="tab-content">
            <!-- Goalkeepers -->
            <div class="tab-pane active" id="goalkeepers">
                <div class="table-container">
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th data-sort="name">Player</th>
                                <th data-sort="minutes">Minutes</th>
                                <th data-sort="xGC">xGC</th>
                                <th data-sort="total_points">Points</th>
                                <th data-sort="xPoints">xPoints</th>
                                <th data-sort="clean_sheets">Clean Sheets</th>
                                <th data-sort="saves">Saves</th>
                                <th data-sort="form">Form</th>
                                <th data-sort="team_against">Next Fixture</th>
                                <th data-sort="diff">Difficulty</th>
                            </tr>
                        </thead>
                        <tbody id="goalkeepersTable">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Defenders -->
            <div class="tab-pane" id="defenders">
                <div class="table-container">
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th data-sort="name">Player</th>
                                <th data-sort="minutes">Minutes</th>
                                <th data-sort="xG">xG</th>
                                <th data-sort="xA">xA</th>
                                <th data-sort="xGC">xGC</th>
                                <th data-sort="total_points">Points</th>
                                <th data-sort="xPoints">xPoints</th>
                                <th data-sort="clean_sheets">Clean Sheets</th>
                                <th data-sort="form">Form</th>
                                <th data-sort="team_against">Next Fixture</th>
                                <th data-sort="diff">Difficulty</th>
                            </tr>
                        </thead>
                        <tbody id="defendersTable">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Midfielders -->
            <div class="tab-pane" id="midfielders">
                <div class="table-container">
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th data-sort="name">Player</th>
                                <th data-sort="minutes">Minutes</th>
                                <th data-sort="xG">xG</th>
                                <th data-sort="xA">xA</th>
                                <th data-sort="total_points">Points</th>
                                <th data-sort="xPoints">xPoints</th>
                                <th data-sort="goal_scored">Goals</th>
                                <th data-sort="assists">Assists</th>
                                <th data-sort="form">Form</th>
                                <th data-sort="team_against">Next Fixture</th>
                                <th data-sort="diff">Difficulty</th>
                            </tr>
                        </thead>
                        <tbody id="midfieldersTable">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Attackers -->
            <div class="tab-pane" id="attackers">
                <div class="table-container">
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th data-sort="name">Player</th>
                                <th data-sort="minutes">Minutes</th>
                                <th data-sort="xG">xG</th>
                                <th data-sort="xA">xA</th>
                                <th data-sort="total_points">Points</th>
                                <th data-sort="xPoints">xPoints</th>
                                <th data-sort="goal_scored">Goals</th>
                                <th data-sort="assists">Assists</th>
                                <th data-sort="form">Form</th>
                                <th data-sort="team_against">Next Fixture</th>
                                <th data-sort="diff">Difficulty</th>
                            </tr>
                        </thead>
                        <tbody id="attackersTable">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Analytics -->
            <div class="tab-pane" id="analytics">
                <div class="analytics-grid">
                    <div class="chart-card">
                        <h3>xG vs xA Correlation</h3>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="xgXaChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Form Distribution</h3>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="formChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>xPoints vs Actual Points</h3>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="pointsChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Home vs Away Performance</h3>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="homeAwayChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home/Away Toggle -->
        <div class="performance-toggle">
            <div class="toggle-buttons">
                <button class="toggle-btn active" data-mode="overall">Overall Stats</button>
                <button class="toggle-btn" data-mode="home">Home Stats</button>
                <button class="toggle-btn" data-mode="away">Away Stats</button>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay hidden" id="loadingOverlay">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p>Loading FPL data...</p>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
